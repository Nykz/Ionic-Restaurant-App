import{Pb as I,Rb as k,Sb as T,Tb as A,j as b,l as d,qa as x,xa as E}from"./chunk-36II4WRS.js";import{a as R}from"./chunk-G2NBWZGV.js";import{a as w,b as y,c as p,d as N}from"./chunk-5ZMMP3RU.js";import{c as U}from"./chunk-RUY5SX76.js";import{f as l}from"./chunk-RW4GY4BD.js";var B=function(r){return r.UID="uid_mazaeats_restaurant",r.INTRO_KEY="maza_eats_intro_restaurant_key",r.TABS="/tabs",r.LOGIN="/login",r.TYPE="restaurant",r.CURRENCY="\u20B9",r}(B||{});var P=function(r){return r.Dark="DARK",r.Light="LIGHT",r.Default="DEFAULT",r}(P||{});var v=p("StatusBar");var u=function(r){return r.Prompt="PROMPT",r.Camera="CAMERA",r.Photos="PHOTOS",r}(u||{}),f=function(r){return r.Rear="REAR",r.Front="FRONT",r}(f||{}),C=function(r){return r.Uri="uri",r.Base64="base64",r.DataUrl="dataUrl",r}(C||{});var h=class extends N{getPhoto(a){return l(this,null,function*(){return new Promise((s,e)=>l(this,null,function*(){if(a.webUseInput||a.source===u.Photos)this.fileInputExperience(a,s,e);else if(a.source===u.Prompt){let t=document.querySelector("pwa-action-sheet");t||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=a.promptLabelHeader||"Photo",t.cancelable=!1,t.options=[{title:a.promptLabelPhoto||"From Photos"},{title:a.promptLabelPicture||"Take Picture"}],t.addEventListener("onSelection",o=>l(this,null,function*(){o.detail===0?this.fileInputExperience(a,s,e):this.cameraExperience(a,s,e)}))}else this.cameraExperience(a,s,e)}))})}pickImages(a){return l(this,null,function*(){return new Promise((s,e)=>l(this,null,function*(){this.multipleFileInputExperience(s,e)}))})}cameraExperience(a,s,e){return l(this,null,function*(){if(customElements.get("pwa-camera-modal")){let t=document.createElement("pwa-camera-modal");t.facingMode=a.direction===f.Front?"user":"environment",document.body.appendChild(t);try{yield t.componentOnReady(),t.addEventListener("onPhoto",o=>l(this,null,function*(){let i=o.detail;i===null?e(new w("User cancelled photos app")):i instanceof Error?e(i):s(yield this._getCameraPhoto(i,a)),t.dismiss(),document.body.removeChild(t)})),t.present()}catch{this.fileInputExperience(a,s,e)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(a,s,e)})}fileInputExperience(a,s,e){let t=document.querySelector("#_capacitor-camera-input"),o=()=>{var i;(i=t.parentNode)===null||i===void 0||i.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",i=>{let n=t.files[0],c="jpeg";if(n.type==="image/png"?c="png":n.type==="image/gif"&&(c="gif"),a.resultType==="dataUrl"||a.resultType==="base64"){let m=new FileReader;m.addEventListener("load",()=>{if(a.resultType==="dataUrl")s({dataUrl:m.result,format:c});else if(a.resultType==="base64"){let D=m.result.split(",")[1];s({base64String:D,format:c})}o()}),m.readAsDataURL(n)}else s({webPath:URL.createObjectURL(n),format:c}),o()}),t.addEventListener("cancel",i=>{e(new w("User cancelled photos app")),o()})),t.accept="image/*",t.capture=!0,a.source===u.Photos||a.source===u.Prompt?t.removeAttribute("capture"):a.direction===f.Front?t.capture="user":a.direction===f.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(a,s){let e=document.querySelector("#_capacitor-camera-input-multiple"),t=()=>{var o;(o=e.parentNode)===null||o===void 0||o.removeChild(e)};e||(e=document.createElement("input"),e.id="_capacitor-camera-input-multiple",e.type="file",e.hidden=!0,e.multiple=!0,document.body.appendChild(e),e.addEventListener("change",o=>{let i=[];for(let n=0;n<e.files.length;n++){let c=e.files[n],m="jpeg";c.type==="image/png"?m="png":c.type==="image/gif"&&(m="gif"),i.push({webPath:URL.createObjectURL(c),format:m})}a({photos:i}),t()}),e.addEventListener("cancel",o=>{s(new w("User cancelled photos app")),t()})),e.accept="image/*",e.click()}_getCameraPhoto(a,s){return new Promise((e,t)=>{let o=new FileReader,i=a.type.split("/")[1];s.resultType==="uri"?e({webPath:URL.createObjectURL(a),format:i,saved:!1}):(o.readAsDataURL(a),o.onloadend=()=>{let n=o.result;s.resultType==="dataUrl"?e({dataUrl:n,format:i,saved:!1}):e({base64String:n.split(",")[1],format:i,saved:!1})},o.onerror=n=>{t(n)})})}checkPermissions(){return l(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return l(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return l(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return l(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},K=new h;var F=p("Camera",{web:()=>new h});var S=R("CallNumber",{web:()=>import("./chunk-4S252MJY.js").then(r=>r.CallNumber)});var L=p("NativeAudio",{web:()=>import("./chunk-ADCJAF3D.js").then(r=>new r.NativeAudioWeb)});var fe=(()=>{let a=class a{constructor(e,t,o,i,n,c){this.router=e,this.datePipe=t,this.alertCtrl=o,this.toastCtrl=i,this.loadingCtrl=n,this.modalCtrl=c,this.isLoading=!1}setLoader(){this.isLoading=!this.isLoading}showAlert(e,t,o,i,n=!0){this.alertCtrl.create({header:t||"Authentication failed",message:e,inputs:i||[],buttons:o||["Okay"],backdropDismiss:n}).then(c=>c.present())}checkErrorMessageForAlert(e,t){var o;(o=e==null?void 0:e.error)!=null&&o.message&&(t=e.error.message),console.log("error message alert: ",t),this.showAlert(t)}showToast(e,t,o,i=3e3){return l(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:i,color:t,position:o})).present()})}errorToast(e,t=4e3){this.showToast(e||"No Internet Connection","danger","bottom",t)}checkMessageForErrorToast(e,t){var o;(o=e==null?void 0:e.error)!=null&&o.message&&(t=e.error.message),this.errorToast(t)}successToast(e){this.showToast(e,"success","bottom")}showLoader(e,t){return this.isLoading||this.setLoader(),this.loadingCtrl.create({message:e,spinner:t||"bubbles"}).then(o=>{o.present().then(()=>{this.isLoading||o.dismiss().then(()=>{console.log("abort presenting")})})}).catch(o=>{console.log("show loading error: ",o)})}hideLoader(){return this.isLoading&&this.setLoader(),this.loadingCtrl.dismiss().then(()=>console.log("dismissed")).catch(e=>console.log("error hide loader: ",e))}createModal(e){return l(this,null,function*(){let t=yield this.modalCtrl.create(e);yield t.present();let{data:o}=yield t.onWillDismiss();if(console.log(o),o)return o})}modalDismiss(e){let t=e||null;console.log("data",t),this.modalCtrl.dismiss(t)}getIcon(e){switch(e.toLowerCase()){case"home":return"home-outline";case"work":return"briefcase-outline";default:return"location-outline"}}customStatusbar(e){return l(this,null,function*(){y.getPlatform()!="web"&&(yield v.setStyle({style:e?P.Dark:P.Light}),U("android")&&v.setBackgroundColor({color:e?"#de0f17":"#ffffff"}))})}takePicture(){return l(this,null,function*(){let e=yield F.getPhoto({quality:90,source:u.Prompt,width:600,resultType:C.Base64});return console.log(e),"data:image/png;base64,"+e.base64String})}checkPlatform(e="web"){return y.getPlatform()==e}call(e){return l(this,null,function*(){return S.call({number:e,bypassAppChooser:!!this.checkPlatform("ios")})})}navigateByUrl(e,t=!0){t==!1?this.router.navigateByUrl(e):this.router.navigateByUrl(e,{replaceUrl:t})}navigate(e,t){this.router.navigate(e,t)}isIos(){return y.getPlatform()=="ios"}preloadAudio(){L.preload({assetId:"notification",assetPath:"notification.wav",audioChannelNum:1,isUrl:!1})}playAudio(){L.play({assetId:"notification"})}dateFormat(e,t){return this.datePipe.transform(e,t)}};a.\u0275fac=function(t){return new(t||a)(d(E),d(x),d(k),d(A),d(T),d(I))},a.\u0275prov=b({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();var g=p("Preferences",{web:()=>import("./chunk-J7JH4DYI.js").then(r=>new r.PreferencesWeb)});var ve=(()=>{let a=class a{constructor(){}setStorage(e,t){g.set({key:e,value:t})}getStorage(e){return g.get({key:e})}removeStorage(e){g.remove({key:e})}clearStorage(){g.clear()}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=b({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();export{B as a,fe as b,ve as c};
