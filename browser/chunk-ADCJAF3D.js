import{d as r}from"./chunk-5ZMMP3RU.js";import{f as t}from"./chunk-RW4GY4BD.js";var o=class{constructor(s){this.audio=s}};var u=class i extends r{resume(s){return t(this,null,function*(){let e=this.getAudioAsset(s.assetId).audio;if(e.paused)return e.play()})}pause(s){return t(this,null,function*(){return this.getAudioAsset(s.assetId).audio.pause()})}getCurrentTime(s){return t(this,null,function*(){return{currentTime:this.getAudioAsset(s.assetId).audio.currentTime}})}getDuration(s){return t(this,null,function*(){let e=this.getAudioAsset(s.assetId).audio;if(Number.isNaN(e.duration))throw"no duration available";if(!Number.isFinite(e.duration))throw"duration not available => media resource is streaming";return{duration:e.duration}})}configure(s){return t(this,null,function*(){throw`configure is not supported for web: ${JSON.stringify(s)}`})}preload(s){return t(this,null,function*(){var e;if(i.AUDIO_ASSET_BY_ASSET_ID.has(s.assetId))throw"AssetId already exists. Unload first if like to change!";if(!(!((e=s.assetPath)===null||e===void 0)&&e.length))throw"no assetPath provided";if(!s.isUrl&&!new RegExp("^/?"+i.FILE_LOCATION).test(s.assetPath)){let d=s.assetPath.startsWith("/")?"":"/";s.assetPath=`${i.FILE_LOCATION}${d}${s.assetPath}`}let a=new Audio(s.assetPath);a.autoplay=!1,a.loop=!1,a.preload="auto",s.volume&&(a.volume=s.volume),i.AUDIO_ASSET_BY_ASSET_ID.set(s.assetId,new o(a))})}play(s){return t(this,null,function*(){var e;let a=this.getAudioAsset(s.assetId).audio;return yield this.stop(s),a.loop=!1,a.currentTime=(e=s.time)!==null&&e!==void 0?e:0,a.play()})}loop(s){return t(this,null,function*(){let e=this.getAudioAsset(s.assetId).audio;return yield this.stop(s),e.loop=!0,e.play()})}stop(s){return t(this,null,function*(){let e=this.getAudioAsset(s.assetId).audio;e.pause(),e.loop=!1,e.currentTime=0})}unload(s){return t(this,null,function*(){yield this.stop(s),i.AUDIO_ASSET_BY_ASSET_ID.delete(s.assetId)})}setVolume(s){return t(this,null,function*(){if(typeof(s==null?void 0:s.volume)!="number")throw"no volume provided";let e=this.getAudioAsset(s.assetId).audio;e.volume=s.volume})}isPlaying(s){return t(this,null,function*(){return{isPlaying:!this.getAudioAsset(s.assetId).audio.paused}})}getAudioAsset(s){if(this.checkAssetId(s),!i.AUDIO_ASSET_BY_ASSET_ID.has(s))throw`no asset for assetId "${s}" available. Call preload first!`;return i.AUDIO_ASSET_BY_ASSET_ID.get(s)}checkAssetId(s){if(typeof s!="string")throw"assetId must be a string";if(!(s!=null&&s.length))throw"no assetId provided"}};u.FILE_LOCATION="assets/sounds";u.AUDIO_ASSET_BY_ASSET_ID=new Map;export{u as NativeAudioWeb};
