import{a as W}from"./chunk-L5LJPID7.js";import{a as X}from"./chunk-UDTTHNTT.js";import{a as K,b as Q}from"./chunk-FL3AVRJI.js";import{A as m,B as s,C as M,Db as Y,Fb as J,J as i,K as a,Kb as L,L as v,O as f,P as p,Q as u,Vb as $,W as d,X as O,Y as b,Z as P,_b as H,cb as B,db as q,ea as y,ga as x,ha as I,ia as E,ib as A,la as z,ma as R,mb as F,n as _,na as D,o as g,q as C,qa as V,qb as N,rb as j,s as S,sb as U,t as o,u as k,wb as G,x as T}from"./chunk-36II4WRS.js";import{a as w,b as h}from"./chunk-RW4GY4BD.js";var ee=t=>({earning:t});function ne(t,c){if(t&1&&(i(0,"ion-row",13)(1,"ion-col",14),d(2),a(),i(3,"ion-col",15),d(4),a()()),t&2){let e=c.$implicit,r=u();o(2),P(" ",e==null?null:e.name," x ",e==null?null:e.quantity," "),o(2),P("",r.currency,"",(e==null?null:e.price)*(e==null?null:e.quantity),"")}}function te(t,c){if(t&1&&(i(0,"p",16),d(1),a()),t&2){let e=u();o(),O(e.order==null?null:e.order.instruction)}}function oe(t,c){if(t&1){let e=f();i(0,"ion-row")(1,"ion-col",17),p("click",function(){_(e);let l=u();return g(l.changeStatus("Rejected"))}),i(2,"ion-button",18),d(3,"REJECT"),a()(),i(4,"ion-col",19),p("click",function(){_(e);let l=u();return g(l.changeStatus("Accepted"))}),i(5,"ion-button",18),d(6,"ACCEPT"),a()()()}t&2&&(o(),M("background","var(--ion-color-danger)"),o(3),M("background","var(--ion-color-success)"))}function ie(t,c){if(t&1&&(i(0,"ion-avatar",2),v(1,"img",3),a()),t&2){let e=u(2);o(),s("src",!(e.order==null||e.order.rider==null)&&e.order.rider.photo?e.order==null||e.order.rider==null?null:e.order.rider.photo:"assets/imgs/avatar.png",S)}}function re(t,c){if(t&1&&(i(0,"p"),d(1),a()),t&2){let e=u(2);o(),O(e.order==null||e.order.rider==null?null:e.order.rider.vehicle)}}function le(t,c){if(t&1){let e=f();i(0,"ion-fab-button",24),p("click",function(){_(e);let l=u(2);return g(l.call(l.order==null||l.order.rider==null?null:l.order.rider.phone))}),v(1,"ion-icon",25),a()}}function ae(t,c){if(t&1){let e=f();i(0,"ion-button",26),p("click",function(){_(e);let l=u(2);return g(l.request(l.order))}),d(1," Request Rider "),a()}}function ce(t,c){if(t&1&&(i(0,"ion-item",20),m(1,ie,2,1,"ion-avatar",21),i(2,"ion-label"),d(3),m(4,re,2,1,"p",10),a(),m(5,le,2,0,"ion-fab-button",22)(6,ae,2,0,"ion-button",23),a()),t&2){let e=u();o(),s("ngIf",e.order==null?null:e.order.rider),o(2),b(" ",e.order!=null&&e.order.rider?e.order==null||e.order.rider==null?null:e.order.rider.name:"No Rider assigned yet"," "),o(),s("ngIf",e.order==null?null:e.order.rider),o(),s("ngIf",e.order==null?null:e.order.rider),o(),s("ngIf",!(e.order!=null&&e.order.rider))}}function de(t,c){if(t&1&&(i(0,"ion-item",30)(1,"ion-label",31),d(2," You Earned "),i(3,"p")(4,"ion-text",32),d(5),x(6,"decimal"),a()()()()),t&2){let e=u(2);o(5),P(" ",e.currency,"",I(6,2,e.order==null?null:e.order.restaurant_share)," ")}}function se(t,c){if(t&1&&(i(0,"ion-row")(1,"ion-col",27),m(2,de,7,4,"ion-item",28),a(),i(3,"ion-col",29)(4,"ion-button",18),d(5),a()()()),t&2){let e=u();o(),s("ngClass",y(5,ee,(e.order==null?null:e.order.status)=="Delivered")),o(),s("ngIf",(e.order==null?null:e.order.status)=="Delivered"),o(),M("background",e.getBgColor(e.order==null?null:e.order.status)),o(2),O(e.order==null?null:e.order.status)}}function ue(t,c){t&1&&(i(0,"ion-select-option",41),d(1,"Picked"),a())}function pe(t,c){if(t&1){let e=f();i(0,"ion-row",33)(1,"ion-col",34)(2,"ion-item",35)(3,"ion-select",36),p("ionChange",function(l){_(e);let n=u();return g(n.changeStat(l))}),m(4,ue,2,0,"ion-select-option",37),i(5,"ion-select-option",38),d(6,"Cancel"),a()()()(),i(7,"ion-col",39),p("click",function(){_(e);let l=u();return g(l.changeStatus(l.stat))}),i(8,"ion-button",40),d(9,"UPDATE STATUS"),a()()()}if(t&2){let e=u();o(3),s("value",e.order==null?null:e.order.status),o(),s("ngIf",(e.order==null?null:e.order.status)=="Ongoing")}}var Ie=(()=>{let c=class c{constructor(r){this.global=r,this.currency=K.CURRENCY,this.status=new C,this.orderDetail=new C,this.callRider=new C,this.requestRider=new C}ngOnInit(){}orderDetails(r){this.global.navigate(["/","tabs","order-detail",r])}getBgColor(r){switch(r){case"Delivered":return"var(--ion-color-success)";case"Cancelled":return"var(--ion-color-danger)";case"Rejected":return"var(--ion-color-danger)";default:return""}}changeStat(r){console.log(r),this.stat=r.detail.value}changeStatus(r){if(!r){this.global.errorToast("Please select a status first");return}let l=h(w({},this.order),{status:r});this.status.emit(l)}call(r){this.callRider.emit(r)}request(r){this.requestRider.emit(r)}};c.\u0275fac=function(l){return new(l||c)(k(Q))},c.\u0275cmp=T({type:c,selectors:[["app-orders"]],inputs:{order:"order"},outputs:{status:"status",orderDetail:"orderDetail",callRider:"callRider",requestRider:"requestRider"},decls:23,vars:19,consts:[[1,"ion-margin-bottom"],["lines","none","detail","true",1,"dashedBorderBottom","userInfo",3,"click"],["slot","start"],[3,"src"],[1,"ion-text-wrap","orderId"],["slot","end","color","dark",1,"price"],["lines","none",3,"click"],["color","dark",4,"ngFor","ngForOf"],["class","ion-text-wrap time",4,"ngIf"],[1,"time"],[4,"ngIf"],["lines","none","class","borderTop vehicle",4,"ngIf"],["class","borderTop",4,"ngIf"],["color","dark"],["size","8"],["size","4",1,"ion-text-end"],[1,"ion-text-wrap","time"],["size","6",1,"ion-no-padding","ion-text-center","left",3,"click"],["fill","clear","expand","block","color","white"],["size","6",1,"ion-no-padding","ion-text-center","right",3,"click"],["lines","none",1,"borderTop","vehicle"],["slot","start",4,"ngIf"],["size","small","color","success","slot","end","class","fab_call",3,"click",4,"ngIf"],["fill","outline","slot","end",3,"click",4,"ngIf"],["size","small","color","success","slot","end",1,"fab_call",3,"click"],["name","call-outline","color","white"],["fill","outline","slot","end",3,"click"],["size","6",1,"ion-no-padding","ion-text-center","left",3,"ngClass"],["lines","none",4,"ngIf"],["size","6","mode","ios",1,"ion-no-padding","ion-text-center","right"],["lines","none"],[1,"ion-text-center"],["color","success"],[1,"borderTop"],["size","6",1,"ion-text-center","ion-no-padding"],["lines","none",1,"selectItem"],["interface","popover","placeholder","Choose Status",3,"ionChange","value"],["value","Picked",4,"ngIf"],["value","Cancelled"],["size","6",1,"ion-text-center",3,"click"],["mode","ios","expand","block","color","secondary",1,"statBtn"],["value","Picked"]],template:function(l,n){l&1&&(i(0,"ion-item-group",0)(1,"ion-item",1),p("click",function(){return n.orderDetails(n.order==null?null:n.order.id)}),i(2,"ion-avatar",2),v(3,"ion-img",3),a(),i(4,"ion-label"),d(5),i(6,"p",4),d(7),a()(),i(8,"ion-text",5),d(9),x(10,"decimal"),a()(),i(11,"ion-item",6),p("click",function(){return n.orderDetails(n.order==null?null:n.order.id)}),i(12,"ion-label"),m(13,ne,5,4,"ion-row",7)(14,te,2,1,"p",8),i(15,"p",9),d(16),x(17,"timestampToDate"),x(18,"date"),a()()(),m(19,oe,7,4,"ion-row",10)(20,ce,7,5,"ion-item",11)(21,se,6,7,"ion-row",10)(22,pe,10,2,"ion-row",12),a()),l&2&&(o(3),s("src",!(n.order==null||n.order.user==null)&&n.order.user.photo?n.order==null||n.order.user==null?null:n.order.user.photo:"assets/imgs/avatar.png"),o(2),b(" ",n.order==null||n.order.user==null?null:n.order.user.name," "),o(2),b(" ORDER ID #",n.order==null?null:n.order.id," "),o(2),P(" ",n.currency,"",I(10,12,n.order==null?null:n.order.grandTotal)," "),o(4),s("ngForOf",n.order==null?null:n.order.order),o(),s("ngIf",n.order==null?null:n.order.instruction),o(2),O(E(18,16,I(17,14,n.order==null?null:n.order.created_at),"MMM d, y, h:mm a")),o(3),s("ngIf",(n.order==null?null:n.order.status)=="Created"),o(),s("ngIf",(n.order==null?null:n.order.status)=="Ongoing"||(n.order==null?null:n.order.status)=="Picked"||(n.order==null?null:n.order.status)=="Accepted"),o(),s("ngIf",(n.order==null?null:n.order.status)=="Delivered"||(n.order==null?null:n.order.status)=="Cancelled"||(n.order==null?null:n.order.status)=="Rejected"),o(),s("ngIf",(n.order==null?null:n.order.status)=="Ongoing"||(n.order==null?null:n.order.status)=="Accepted"))},dependencies:[B,j,U,N,G,L,Y,A,q,F,H,J,$,R,D,z,V,W,X],styles:["ion-item-group[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]{border-radius:10px}ion-item-group[_ngcontent-%COMP%]{border:1px solid var(--ion-color-dark)}ion-item-group[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-top:1vh;font-size:.75rem!important}ion-item-group[_ngcontent-%COMP%]   .userInfo[_ngcontent-%COMP%]{--inner-padding-end: 5px;--padding-start: 5px}ion-item-group[_ngcontent-%COMP%]   .userInfo[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-right:5px}ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.95rem}ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.6rem}ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p.orderId[_ngcontent-%COMP%]{font-size:.6rem;margin-top:5px}ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{font-size:.8rem}ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:.85rem}ion-item-group[_ngcontent-%COMP%]   ion-item.borderTop[_ngcontent-%COMP%]{border-radius:0!important}ion-item-group[_ngcontent-%COMP%]   ion-item.borderTop[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item-group[_ngcontent-%COMP%]   ion-item.borderTop[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;font-weight:400}ion-item-group[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{align-items:center}ion-item-group[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.bg[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}ion-item-group[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.right[_ngcontent-%COMP%]{border-radius:0 0 10px}ion-item-group[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.left[_ngcontent-%COMP%]{border-radius:0 0 0 10px}ion-item-group[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .selectItem[_ngcontent-%COMP%]{border:1px solid lightgray;border-radius:5px;margin-left:5px}ion-item-group[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .selectItem[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:100%;--padding-top: 8px;--padding-bottom: 8px}.earning[_ngcontent-%COMP%]{border-top:1px dashed var(--ion-color-dark);background-color:var(--ion-color-light)}.earning[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--ion-color-light)}.earning[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8rem!important;color:gray}.earning[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:5px;font-size:1rem!important}.vehicle[_ngcontent-%COMP%]{margin-bottom:8px}"]});let t=c;return t})();export{Ie as a};
