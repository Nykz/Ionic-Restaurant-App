import{a as Ne}from"./chunk-UX7P3H4G.js";import{G as Re,a as Te,b as xe,c as Ve,m as De}from"./chunk-3XMFGL7I.js";import{b as Fe}from"./chunk-BRGWQJYK.js";import"./chunk-E27WRCEQ.js";import{a as O,b as G}from"./chunk-FL3AVRJI.js";import{$ as v,$b as Ee,A as P,B as m,Db as Y,Ga as pe,Ha as ge,Hb as U,J as c,Ja as _e,K as s,Kb as Ie,L as C,La as Ce,M as ee,Ma as fe,Mb as z,N as ne,Nb as j,O as T,P as w,Q as h,Qa as Me,S as te,T as oe,U as ie,Ub as be,V as K,Va as D,Vb as q,W as _,Wb as Se,Y as S,Z as re,_ as le,aa as I,ab as R,ac as Ae,ba as b,c as J,db as V,eb as F,fa as ce,fb as he,ga as se,ia as de,ib as N,j as Z,jb as k,kb as ye,la as ae,m as $,ma as ue,n as p,na as x,o as g,pb as W,qa as me,rb as B,t as d,tb as Pe,u as E,ub as Oe,vb as we,wb as L,x as A,xb as ve}from"./chunk-36II4WRS.js";import"./chunk-HTSKCE6I.js";import"./chunk-7KGURMOZ.js";import"./chunk-G2NBWZGV.js";import"./chunk-5ZMMP3RU.js";import"./chunk-NOFUNQAN.js";import"./chunk-TIZDWYJD.js";import"./chunk-GF5ML23A.js";import"./chunk-G3CV3VGG.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-4U6PRYVA.js";import"./chunk-BE36LD5W.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as f,b as y,f as M}from"./chunk-RW4GY4BD.js";var ze=(i,r)=>({active:i,inActive:r});function je(i,r){if(i&1&&(c(0,"ion-button",12),_(1),s()),i&2){let a=h();m("color",a.coupon!=null&&a.coupon.isActive?"secondary":"danger")("strong",!0)("disabled",!0),d(),S(" ",a.coupon!=null&&a.coupon.isActive?"Active":"InActive"," ")}}function qe(i,r){if(i&1&&(c(0,"ion-row",13)(1,"ion-col",14)(2,"div"),_(3),s()()()),i&2){let a=h();d(3),S(" ",a.coupon==null?null:a.coupon.description," ")}}var ke=(()=>{let r=class r{constructor(){this.isValid=!1,this.currency=O.CURRENCY}ngOnInit(){var t;let n=new Date;this.isValid=new Date((t=this.coupon)==null?void 0:t.expiryDate)>=n}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=A({type:r,selectors:[["app-coupon"]],inputs:{coupon:"coupon"},decls:22,vars:16,consts:[["lines","none",1,"ion-no-padding","couponItem"],["size","1",1,"ion-text-center","offer",3,"ngClass"],["color","white"],[1,"circle1"],[1,"circle2"],[1,"circle3"],[1,"circle4"],["size","11"],["lines","none"],[1,"ion-text-wrap"],["fill","clear","slot","end",3,"color","strong","disabled",4,"ngIf"],["class","ion-text-wrap ion-padding-top dashedBorderTop",4,"ngIf"],["fill","clear","slot","end",3,"color","strong","disabled"],[1,"ion-text-wrap","ion-padding-top","dashedBorderTop"],["size","12"]],template:function(t,e){t&1&&(c(0,"ion-item",0)(1,"ion-card")(2,"ion-row")(3,"ion-col",1)(4,"ion-label",2)(5,"strong"),_(6),s()(),C(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6),s(),c(11,"ion-col",7)(12,"ion-item",8)(13,"ion-label"),_(14),c(15,"p",9),_(16),s(),c(17,"p",9),_(18),se(19,"date"),s()(),P(20,je,2,4,"ion-button",10),s(),P(21,qe,4,1,"ion-row",11),s()()()()),t&2&&(d(3),m("ngClass",ce(13,ze,e.isValid,!e.isValid)),d(3),S(" ",e.coupon!=null&&e.coupon.isPercentage?(e.coupon==null?null:e.coupon.discount)+"% OFF":e.currency+(e.coupon==null?null:e.coupon.discount)+" OFF"," "),d(8),S(" ",e.coupon==null?null:e.coupon.code," "),d(2),le(" Get ",e.coupon!=null&&e.coupon.isPercentage?(e.coupon==null?null:e.coupon.discount)+"% OFF":e.currency+(e.coupon==null?null:e.coupon.discount)+" OFF"," ",e.coupon!=null&&e.coupon.minimumOrderAmount?" on orders above "+e.currency+(e.coupon==null?null:e.coupon.minimumOrderAmount):""," ",e.coupon!=null&&e.coupon.upto_discount?". Maximum discount "+e.currency+(e.coupon==null?null:e.coupon.upto_discount):""," "),d(2),re(" ",e.isValid?"Valid till ":"Expired on "," ",de(19,10,e.coupon==null?null:e.coupon.expiryDate,"MMM d, y")," "),d(2),m("ngIf",e.isValid),d(),m("ngIf",e.coupon==null?null:e.coupon.description))},dependencies:[B,L,he,Y,N,V,x,ae,me],styles:["ion-item.couponItem[_ngcontent-%COMP%]{--background: transparent;--inner-padding-end: 0}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:100%;margin:0}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-image:linear-gradient(to right,var(--ion-color-primary),#f95b4b)}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   .inActive[_ngcontent-%COMP%]{background:var(--ion-color-medium)}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:center}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1.1rem;letter-spacing:.5px;writing-mode:vertical-lr;transform:rotate(180deg);align-content:center}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%], ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%], ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle3[_ngcontent-%COMP%], ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle4[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--ion-color-white);width:8px;height:8px;border-radius:50%;position:absolute;left:-4px}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{top:20%;transform:translateY(-20%)}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{top:40%;transform:translateY(-40%)}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle3[_ngcontent-%COMP%]{top:60%;transform:translateY(-60%)}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.offer[_ngcontent-%COMP%]   .circle4[_ngcontent-%COMP%]{top:80%;transform:translateY(-80%)}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:5px;font-size:.75rem}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:1vh}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;font-size:.8rem;font-weight:700;color:var(--ion-color-medium)}ion-item.couponItem[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: dimgray}"]});let i=r;return i})();var We=[{id:"1",code:"TRYNEW",discount:20,isPercentage:!0,description:"Use code TRYNEW & get 20% off",isActive:!0,expiryDate:"2030-08-15T18:30:00",minimumOrderAmount:499,upto_discount:200,terms:["Offer is valid only on select restaurants","Coupon code can be applied only once in 2hr on this restaurant","Other T&Cs amy apply"]},{id:"2",code:"FREESHIP",discount:100,isPercentage:!1,description:"Flat "+O.CURRENCY+"100 off",isActive:!0,expiryDate:"2030-09-30T23:59:59",terms:["Valid for all users","No minimum order amount required","Limited time offer"]},{id:"3",code:"SALE50",discount:50,isPercentage:!0,description:"Big Sale - Flat 50% off on everything",isActive:!0,expiryDate:"2030-08-31T23:59:59",minimumOrderAmount:1e3,upto_discount:550,terms:["Valid for first-time users","Minimum order amount "+O.CURRENCY+"1000","Maximum discount up to "+O.CURRENCY+"550"],restaurant_id:"1"},{id:"4",code:"TRY30",discount:30,isPercentage:!0,description:"Big Sale - Flat 30% off on everything",isActive:!0,expiryDate:"2030-08-21T23:59:59",minimumOrderAmount:1e3,upto_discount:250,terms:["Valid for first-time users","Minimum order amount "+O.CURRENCY+"1000","Maximum discount up to "+O.CURRENCY+"250"],restaurant_id:"1"},{id:"5",code:"LUCKY100",discount:100,isPercentage:!1,description:"Big Sale - Flat 100 bucks off on everything",isActive:!0,expiryDate:"2020-09-31T23:59:59",minimumOrderAmount:1e3,upto_discount:100,terms:["Valid for lucky draw random customers","Minimum order amount "+O.CURRENCY+"1000","Maximum discount up to "+O.CURRENCY+"100"],restaurant_id:"1"}];var Q=(()=>{let r=class r{get coupons(){return this._coupons.asObservable()}constructor(){this._coupons=new J([]),this.profileService=$(Fe)}getRestaurantId(){return M(this,null,function*(){try{let n=yield this.profileService.getProfile();return n==null?void 0:n.id}catch(n){throw n}})}addCoupon(n){return M(this,null,function*(){try{let t=yield this.getRestaurantId(),e=new Date,l={code:n==null?void 0:n.code,expiryDate:n==null?void 0:n.expiryDate,isActive:n==null?void 0:n.isActive,isPercentage:n==null?void 0:n.isPercentage,discount:n==null?void 0:n.discount,restaurant_id:t,created_at:e,updated_at:e};n!=null&&n.description&&(l=y(f({},l),{description:n.description})),n!=null&&n.minimumOrderAmount&&(l=y(f({},l),{minimumOrderAmount:n.minimumOrderAmount})),n!=null&&n.upto_discount&&(l=y(f({},l),{upto_discount:n.upto_discount}));let u=Math.floor(1e8+Math.random()*9e8).toString(),o=[];return l=y(f({},l),{id:u}),o.push(l),o=o.concat(this._coupons.value),this._coupons.next(o),o}catch(t){throw t}})}getCoupons(){return M(this,null,function*(){try{let n=yield this.getRestaurantId(),t=We.filter(e=>(e==null?void 0:e.restaurant_id)&&(e==null?void 0:e.restaurant_id)==n);return console.log(t),this._coupons.next(t),t}catch(n){throw n}})}updateCoupon(n,t){return M(this,null,function*(){try{let e=yield this.getRestaurantId(),l=new Date,u={code:t==null?void 0:t.code,expiryDate:t==null?void 0:t.expiryDate,isActive:t==null?void 0:t.isActive,isPercentage:t==null?void 0:t.isPercentage,discount:t==null?void 0:t.discount,restaurant_id:e,created_at:n==null?void 0:n.created_at,updated_at:l};t!=null&&t.description&&(u=y(f({},u),{description:t.description})),t!=null&&t.minimumOrderAmount&&(u=y(f({},u),{minimumOrderAmount:t.minimumOrderAmount})),t!=null&&t.upto_discount&&(u=y(f({},u),{upto_discount:t.upto_discount}));let o=this._coupons.value,H=y(f({},u),{id:n==null?void 0:n.id}),Ye=o.findIndex(Ue=>Ue.id==(n==null?void 0:n.id));return o[Ye]=H,this._coupons.next(o),console.log("check data: ",H),H}catch(e){throw e}})}deleteCoupon(n){return M(this,null,function*(){try{let e=this._coupons.value.filter(l=>l.id!=n.id);return this._coupons.next(e),e}catch(t){throw t}})}reset(){this._coupons.next(null)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=Z({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();function Qe(i,r){if(i&1){let a=T();c(0,"ion-datetime",21),b("ngModelChange",function(t){p(a);let e=h();return I(e.model.expiryDate,t)||(e.model.expiryDate=t),g(t)}),s()}if(i&2){let a=h();m("showDefaultButtons",!0),v("ngModel",a.model.expiryDate)}}function He(i,r){i&1&&C(0,"ion-spinner",22)}var Le=(()=>{let r=class r{constructor(n,t){this.global=n,this.couponService=t,this.model={},this.isSaving=!1}ngOnInit(){var n;(n=this.model)!=null&&n.id||(this.model.isActive=!0,this.model.isPercentage=!0,this.model.expiryDate=this.global.dateFormat(new Date,"yyyy-MM-dd"))}onSubmit(n){return M(this,null,function*(){var t;if(n.valid){console.log(n.value);try{this.isSaving=!0;let e=this.global.dateFormat(n.value.expiryDate,"yyyy-MM-dd"),l=y(f({},n.value),{expiryDate:e});(t=this.model)!=null&&t.id?yield this.couponService.updateCoupon(this.model,l):yield this.couponService.addCoupon(l),this.isSaving=!1,this.global.modalDismiss()}catch(e){console.log(e),this.isSaving=!1,this.global.errorToast()}}})}};r.\u0275fac=function(t){return new(t||r)(E(G),E(Q))},r.\u0275cmp=A({type:r,selectors:[["app-add-coupon"]],inputs:{model:"model"},decls:41,vars:14,consts:[["f","ngForm"],["slot","start"],[3,"click"],["name","arrow-back-outline"],[3,"fullscreen"],[3,"ngSubmit"],[1,"ion-margin"],["lines","none",1,"ion-margin-bottom"],["aria-label","isactive","slot","end","color","success","name","isActive",3,"ngModelChange","ngModel"],["slot","end","datetime","datetime"],[3,"keepContentsMounted"],[1,"ion-margin-bottom","ion-padding-horizontal","discount"],["size","4",1,"ion-text-center"],["aria-label","isPercentage","color","success","name","isPercentage",3,"ngModelChange","ngModel"],["label","","type","number","name","discount","placeholder","Enter Discount","errorText","* Please enter discount","required","",1,"ion-margin-bottom",3,"ngModelChange","ngModel"],["label","","type","text","name","code","placeholder","Enter Coupon Code","errorText","* Please enter a unique code","required","",1,"ion-margin-bottom",3,"ngModelChange","ngModel"],["label","","type","number","name","minimumOrderAmount","placeholder","Enter minimum order value (if any)","errorText","* Please enter minimum order value",1,"ion-margin-bottom",3,"ngModelChange","ngModel"],["label","","type","number","name","upto_discount","placeholder","Enter discount up to a certain value (if any)","errorText","* Please enter discount value limit",1,"ion-margin-bottom",3,"ngModelChange","ngModel"],["label","","type","text","name","description","placeholder","Enter Description (optional)","errorText","* Please enter description",1,"ion-margin-bottom",3,"ngModelChange","ngModel"],["expand","block","shape","round","size","large","color","primary",3,"disabled","type"],["name","crescent","color","white",4,"ngIf"],["id","datetime","presentation","date","name","expiryDate",3,"ngModelChange","showDefaultButtons","ngModel"],["name","crescent","color","white"]],template:function(t,e){if(t&1){let l=T();c(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),w("click",function(){return p(l),g(e.global.modalDismiss())}),C(4,"ion-icon",3),s()(),c(5,"ion-title"),_(6),s()()(),c(7,"ion-content",4)(8,"form",5,0),w("ngSubmit",function(){p(l);let o=K(9);return g(e.onSubmit(o))}),c(10,"ion-list",6)(11,"ion-item",7)(12,"ion-label"),_(13,"ACTIVE"),s(),c(14,"ion-toggle",8),b("ngModelChange",function(o){return p(l),I(e.model.isActive,o)||(e.model.isActive=o),g(o)}),s()(),c(15,"ion-item",7)(16,"ion-label"),_(17,"EXPIRY DATE"),s(),C(18,"ion-datetime-button",9),c(19,"ion-modal",10),P(20,Qe,1,2,"ng-template"),s()(),c(21,"div",11)(22,"ion-row")(23,"ion-col",12)(24,"ion-label"),_(25,"AMOUNT"),s()(),c(26,"ion-col",12)(27,"ion-toggle",13),b("ngModelChange",function(o){return p(l),I(e.model.isPercentage,o)||(e.model.isPercentage=o),g(o)}),s()(),c(28,"ion-col",12)(29,"ion-label"),_(30,"PERCENTAGE"),s()()(),c(31,"ion-input",14),b("ngModelChange",function(o){return p(l),I(e.model.discount,o)||(e.model.discount=o),g(o)}),s()(),c(32,"ion-input",15),b("ngModelChange",function(o){return p(l),I(e.model.code,o)||(e.model.code=o),g(o)}),w("ngModelChange",function(o){return p(l),g(e.model.code=o.toUpperCase())}),s(),c(33,"ion-input",16),b("ngModelChange",function(o){return p(l),I(e.model.minimumOrderAmount,o)||(e.model.minimumOrderAmount=o),g(o)}),s(),c(34,"ion-input",17),b("ngModelChange",function(o){return p(l),I(e.model.upto_discount,o)||(e.model.upto_discount=o),g(o)}),s(),c(35,"ion-textarea",18),b("ngModelChange",function(o){return p(l),I(e.model.description,o)||(e.model.description=o),g(o)}),s()(),c(36,"div",6)(37,"ion-button",19)(38,"ion-text"),_(39),s(),P(40,He,1,0,"ion-spinner",20),s()()()()}if(t&2){let l=K(9);d(6),S("",e.model!=null&&e.model.id?"Edit ":"Add "," Coupon"),d(),m("fullscreen",!0),d(7),v("ngModel",e.model.isActive),d(5),m("keepContentsMounted",!0),d(8),v("ngModel",e.model.isPercentage),d(4),v("ngModel",e.model.discount),d(),v("ngModel",e.model.code),d(),v("ngModel",e.model.minimumOrderAmount),d(),v("ngModel",e.model.upto_discount),d(),v("ngModel",e.model.description),d(2),m("disabled",!l.valid)("type",e.isSaving?"button":"submit"),d(2),S(" ",e.isSaving?"SAVING":"SAVE"," "),d(),m("ngIf",e.isSaving)}},dependencies:[Ae,Ee,Se,W,j,F,V,q,z,k,ve,B,L,be,ye,R,Y,N,Ie,U,x,D,fe,pe,ge,Me,Ce,_e],styles:["ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem}div.discount[_ngcontent-%COMP%]{border:1px dashed var(--ion-color-medium);border-radius:10px}div.discount[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:center}"]});let i=r;return i})();var Ke=["edit_coupon_modal"];function Xe(i,r){i&1&&(c(0,"div",9),C(1,"ion-spinner",10),s())}function Je(i,r){if(i&1&&C(0,"app-empty-screen",11),i&2){let a=h();m("model",a.model)}}function Ze(i,r){if(i&1){let a=T();c(0,"div",13)(1,"ion-item-sliding"),C(2,"app-coupon",14),c(3,"ion-item-options",15)(4,"ion-item-option",16),w("click",function(){let t=p(a).$implicit,e=h(2);return g(e.editCoupon(t))}),C(5,"ion-icon",17),s(),c(6,"ion-item-option",16),w("click",function(){let t=p(a).$implicit,e=h(2);return g(e.deleteCouponAlert(t))}),C(7,"ion-icon",18),s()()()()}if(i&2){let a=r.$implicit;d(2),m("coupon",a)}}function $e(i,r){if(i&1&&(ee(0),P(1,Ze,8,1,"div",12),ne()),i&2){let a=h();d(),m("ngForOf",a.coupons)}}function en(i,r){if(i&1&&C(0,"app-add-coupon",11),i&2){let a=h();m("model",a.couponModel)}}var En=(()=>{let r=class r{constructor(n,t){this.couponService=n,this.global=t,this.isLoading=!1,this.coupons=[],this.couponModel={},this.model={title:"Sorry! No coupons created yet",subTitle:"Currently, there are no coupons available",icon:"ticket",color:"primary"},this.isEditCoupon=!1,Te({add:xe,create:De,trash:Re,arrowBackOutline:Ve})}ngOnInit(){this.couponSub=this.couponService.coupons.subscribe({next:n=>{console.log("coupon data: ",n),this.coupons=n},error:n=>{console.log(n)}}),this.getData()}getData(){return M(this,null,function*(){try{this.isLoading=!0,yield this.couponService.getCoupons(),this.isLoading=!1}catch(n){this.isLoading=!1,console.log(n),this.global.errorToast()}})}editCoupon(n){return M(this,null,function*(){n&&(this.couponModel=f({},n),console.log(this.couponModel)),this.isEditCoupon=!0})}deleteCouponAlert(n){this.global.showAlert(`Are you sure you want to delete "${n==null?void 0:n.code}" coupon`,"Confirm",[{text:"NO",role:"cancel"},{text:"YES",handler:()=>{this.deleteCoupon(n)}}])}deleteCoupon(n){return M(this,null,function*(){try{this.global.showLoader("Please wait..."),yield this.couponService.deleteCoupon(n),this.global.hideLoader()}catch(t){this.global.hideLoader(),console.log(t),this.global.checkMessageForErrorToast(t)}})}reset(n){console.log(n),this.couponModel={},this.isEditCoupon=!1}ngOnDestroy(){this.couponSub&&this.couponSub.unsubscribe(),this.couponService.reset()}};r.\u0275fac=function(t){return new(t||r)(E(Q),E(G))},r.\u0275cmp=A({type:r,selectors:[["app-coupons"]],viewQuery:function(t,e){if(t&1&&te(Ke,5),t&2){let l;oe(l=ie())&&(e.modal=l.first)}},decls:14,vars:4,consts:[["edit_coupon_modal",""],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","add"],["color","light"],["class","ion-text-center alignSpinner",4,"ngIf"],[3,"model",4,"ngIf"],[4,"ngIf"],[3,"didDismiss","isOpen"],[1,"ion-text-center","alignSpinner"],["name","crescent","color","primary"],[3,"model"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],[3,"coupon"],["side","end"],["color","light",3,"click"],["slot","icon-only","name","create","color","secondary"],["slot","icon-only","name","trash","color","danger"]],template:function(t,e){if(t&1){let l=T();c(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),w("click",function(){return p(l),g(e.editCoupon())}),C(4,"ion-icon",3),s()(),c(5,"ion-title"),_(6,"Coupons"),s()()(),c(7,"ion-content",4),P(8,Xe,2,0,"div",5)(9,Je,1,1,"app-empty-screen",6)(10,$e,2,1,"ng-container",7),c(11,"ion-modal",8,0),w("didDismiss",function(o){return p(l),g(e.reset(o))}),P(13,en,1,1,"ng-template"),s()()}t&2&&(d(8),m("ngIf",e.isLoading),d(),m("ngIf",!e.isLoading&&(e.coupons==null?null:e.coupons.length)==0),d(),m("ngIf",!e.isLoading&&(e.coupons==null?null:e.coupons.length)>0),d(),m("isOpen",e.isEditCoupon))},dependencies:[R,W,j,F,V,q,z,k,U,we,Oe,Pe,x,ue,D,Ne,ke,Le],encapsulation:2});let i=r;return i})();export{En as CouponsPage};
