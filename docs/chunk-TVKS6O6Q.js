import{a as Y}from"./chunk-KD2NF24Q.js";import{a as Ge}from"./chunk-UX7P3H4G.js";import{G as Ue,a as Le,b as Be,c as Ne,f as Re,l as qe,m as Ae}from"./chunk-3XMFGL7I.js";import{b as D}from"./chunk-BRGWQJYK.js";import"./chunk-E27WRCEQ.js";import{a as Ve,b as W}from"./chunk-FL3AVRJI.js";import{$b as Fe,A as u,B as m,D as se,Fa as T,Fb as ke,Ga as fe,Gb as Te,Ha as _e,Hb as Oe,Ia as ve,J as r,K as a,Ka as S,Kb as G,L as d,Lb as H,M as te,Ma as ye,Mb as Q,N as ie,Nb as $,O as w,Oa as Ie,P as v,Pa as Ce,Q as p,Qa as be,S as le,T as ce,U as me,Vb as F,W as g,Wa as xe,Wb as ze,X as P,Y as L,Z as de,_b as je,ac as De,c as ne,db as R,eb as q,ga as B,ha as ge,ia as pe,j as oe,jb as A,l as ae,ma as k,n as I,na as N,o as C,pa as ue,pb as U,q as ee,qb as we,ra as he,rb as O,s as re,t as l,tb as Se,u as y,ub as Me,vb as Ee,wb as z,x as b,xb as j,yb as Pe}from"./chunk-36II4WRS.js";import"./chunk-HTSKCE6I.js";import"./chunk-7KGURMOZ.js";import"./chunk-G2NBWZGV.js";import"./chunk-5ZMMP3RU.js";import"./chunk-NOFUNQAN.js";import"./chunk-TIZDWYJD.js";import"./chunk-GF5ML23A.js";import"./chunk-G3CV3VGG.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-4U6PRYVA.js";import"./chunk-BE36LD5W.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as E,b as Z,f as _}from"./chunk-RW4GY4BD.js";var J=class{constructor(o,s,e,i,t,c,f,h,M,V,x,Ke){this.id=o,this.restaurant_id=s,this.category_id=e,this.cover=i,this.name=t,this.desc=c,this.price=f,this.veg=h,this.status=M,this.variation=V,this.rating=x,this.quantity=Ke}};var He=[{category_id:"1",cover:"assets/dishes/kadai_paneer.png",desc:"A delightful Indian dish with paneer and a rich gravy, perfect for any occasion.",id:"1",name:"Kadai Paneer",price:250,rating:0,status:!0,restaurant_id:"1",variation:!1,veg:!0},{category_id:"4",cover:"assets/dishes/dosa.jpg",desc:"Healthy and delicious Oats Dosa served with chutney and sambar.",id:"2",name:"Oats Dosa",price:200,rating:0,status:!0,restaurant_id:"1",variation:!1,veg:!0},{category_id:"2",cover:"assets/dishes/burger.jpg",desc:"Savor the taste of our mouthwatering Cheese Burger, a true delight for burger lovers.",id:"3",name:"Cheese Burger",price:150,rating:0,status:!0,restaurant_id:"1",variation:!1,veg:!1},{category_id:"1",cover:"assets/dishes/nan.jpg",desc:"Soft and buttery Naan served with delectable paneer curry.",id:"4",name:"Butter Naan with Paneer",price:200,rating:0,status:!1,restaurant_id:"1",variation:!1,veg:!0},{category_id:"2",cover:"assets/dishes/pasta.jpeg",desc:"Indulge in the rich and creamy Creamy Alfredo Pasta, a classic Italian favorite.",id:"5",name:"Creamy Alfredo Pasta",price:250,rating:0,status:!0,restaurant_id:"1",variation:!1,veg:!1},{category_id:"6",cover:"assets/dishes/chinese2.jpg",desc:"Enjoy the delectable Steamed Chinese Momo, a perfect blend of flavors.",id:"6",name:"Steamed Chinese Momo",price:160,rating:0,status:!1,restaurant_id:"2",variation:!1,veg:!0},{category_id:"3",cover:"assets/dishes/hakka_chowmein.jpg",desc:"Savor the taste of our delicious Hakka Chowmein, a popular Chinese dish.",id:"7",name:"Hakka Chowmein",price:200,rating:0,status:!0,restaurant_id:"1",variation:!1,veg:!1},{category_id:"5",cover:"assets/dishes/egg_fry.jpg",desc:"Spicy and flavorful Spicy Egg Fry, a must-try dish for egg lovers.",id:"8",name:"Spicy Egg Fry",price:60,rating:0,status:!0,restaurant_id:"2",variation:!1,veg:!0},{category_id:"5",cover:"assets/dishes/nachos.jpg",desc:"Macho Nachos with Salsa, a tantalizing combination of flavors and textures.",id:"9",name:"Macho Nachos with Salsa",price:399,rating:0,status:!0,restaurant_id:"2",variation:!1,veg:!0},{category_id:"8",cover:"assets/dishes/gaz.jpg",desc:"Warm and comforting Tomato Soup, a perfect appetizer for any meal.",id:"10",name:"Tomato Soup",price:120,rating:0,status:!0,restaurant_id:"3",variation:!1,veg:!0},{category_id:"10",cover:"assets/dishes/veg_roll.jpg",desc:"Mexican Veggie Roll with a medley of fresh vegetables and zesty flavors.",id:"11",name:"Mexican Veggie Roll",price:120,rating:0,status:!0,restaurant_id:"3",variation:!1,veg:!0},{category_id:"9",cover:"assets/dishes/burger.jpg",desc:"Classic beef burger with cheese, lettuce, and special sauce.",id:"12",name:"Cheese Burger",price:180,rating:0,status:!0,restaurant_id:"3",variation:!1,veg:!1},{category_id:"12",cover:"assets/dishes/chicken_burger.jpg",desc:"Juicy chicken burger with mayo, tomatoes, and onions.",id:"13",name:"Chicken Burger",price:200,rating:0,status:!0,restaurant_id:"4",variation:!1,veg:!1},{category_id:"12",cover:"assets/dishes/chocolate_cake.png",desc:"Rich and creamy Chocolate Cake, a delightful treat for all chocolate lovers.",id:"14",name:"Chocolate Cake",price:350,rating:0,status:!0,restaurant_id:"4",variation:!1,veg:!0},{category_id:"12",cover:"assets/dishes/icecream_bowl.png",desc:"Assorted ice cream flavors - vanilla, chocolate, and strawberry.",id:"15",name:"Ice Cream Bowl",price:120,rating:0,status:!0,restaurant_id:"4",variation:!1,veg:!0},{category_id:"13",cover:"assets/dishes/continental.png",desc:"Experience the flavors of our scrumptious Continental Delight, a perfect fusion dish.",id:"16",name:"Continental Delight",price:220,rating:0,status:!0,restaurant_id:"4",variation:!1,veg:!0},{category_id:"15",cover:"assets/dishes/margherita.jpg",desc:"Classic Margherita Pizza with fresh tomatoes, mozzarella, and basil.",id:"17",name:"Margherita Pizza",price:200,rating:0,status:!0,restaurant_id:"5",variation:!1,veg:!0},{category_id:"15",cover:"assets/dishes/pepperoni.jpg",desc:"Savory Pepperoni Pizza topped with delicious pepperoni slices and cheese.",id:"18",name:"Pepperoni Pizza",price:250,rating:0,status:!0,restaurant_id:"5",variation:!1,veg:!1},{category_id:"16",cover:"assets/dishes/hawaiian.jpg",desc:"Hawaiian Pizza with ham, pineapple, and cheese for a sweet and savory combo.",id:"19",name:"Hawaiian Pizza",price:230,rating:0,status:!0,restaurant_id:"5",variation:!1,veg:!1},{category_id:"16",cover:"assets/dishes/veggie.png",desc:"Veggie Supreme Pizza loaded with fresh vegetables and gooey cheese.",id:"20",name:"Veggie Supreme Pizza",price:220,rating:0,status:!0,restaurant_id:"5",variation:!1,veg:!0},{category_id:"16",cover:"assets/dishes/bbq-chicken.jpg",desc:"Delicious BBQ Chicken Pizza with tender chicken and tangy barbecue sauce.",id:"21",name:"BBQ Chicken Pizza",price:260,rating:0,status:!0,restaurant_id:"5",variation:!1,veg:!1},{category_id:"14",cover:"assets/dishes/spanish_pizza.png",desc:"Spicy Spanish Pizza with jalapenos, ground beef, and a burst of flavors.",id:"22",name:"Spanish Pizza",price:240,rating:0,status:!0,restaurant_id:"5",variation:!1,veg:!1},{category_id:"17",cover:"assets/dishes/gaz.jpg",desc:"Warm and comforting Tomato Soup, a perfect appetizer for any meal.",id:"23",name:"Tomato Soup",price:120,rating:0,status:!0,restaurant_id:"6",variation:!1,veg:!0},{category_id:"19",cover:"assets/dishes/veg_roll.jpg",desc:"Mexican Veggie Roll with a medley of fresh vegetables and zesty flavors.",id:"24",name:"Mexican Veggie Roll",price:120,rating:0,status:!0,restaurant_id:"6",variation:!1,veg:!0},{category_id:"18",cover:"assets/dishes/burger.jpg",desc:"Classic beef burger with cheese, lettuce, and special sauce.",id:"25",name:"Cheese Burger",price:180,rating:0,status:!0,restaurant_id:"6",variation:!1,veg:!1}];var X=(()=>{let o=class o{get items(){return this._items.asObservable()}constructor(e){this.profileService=e,this._items=new ne([])}getRestaurantMenu(){return _(this,null,function*(){try{let e=yield this.profileService.getProfile(),i=He.filter(c=>c.restaurant_id==e.id);console.log(i);let t=this._items.value;return t=t.concat(i),this._items.next(t),i}catch(e){throw e}})}removeMenuItem(e){return _(this,null,function*(){try{}catch(i){throw i}})}addMenuItem(e,i,t){return _(this,null,function*(){try{let c=new FormData;c=this.jsonToFormData(e),c.append("cover",t,t.name);let h=[Z(E({},e),{cover:i})];return h=h.concat(this._items.value),this._items.next(h),!0}catch(c){throw c}})}jsonToFormData(e){let i=new FormData;return Object.keys(e).forEach(t=>{i.append(t,e[t])}),i}updateMenuItem(e,i,t,c){return _(this,null,function*(){try{let f=e;if(t){e=Z(E({},e),{cover:t});let x=new FormData;x=this.jsonToFormData(e),x.append("cover",c,c.name),f=x}let h=this._items.value,M=h.findIndex(x=>x.id==i.id),V=new J(i.id,i.restaurant_id,(e==null?void 0:e.category_id)||i.category_id,e!=null&&e.cover?e.cover:i.cover,e.name,e.desc,e.price,e.veg,e.status,i.variation,i.rating,i.quantity?i.quantity:0);return h[M]=V,this._items.next(h),console.log("check data: ",V),V}catch(f){throw f}})}reset(){this._items.next(null)}};o.\u0275fac=function(i){return new(i||o)(ae(D))},o.\u0275prov=oe({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();var et=["filePicker"];function tt(n,o){if(n&1&&(r(0,"ion-select-option",23),g(1),a()),n&2){let s=o.$implicit;m("value",s.id),l(),P(s==null?null:s.name)}}function it(n,o){n&1&&(r(0,"ion-text",24)(1,"p",25),g(2,"* Select Category"),a()())}function nt(n,o){if(n&1&&(r(0,"div")(1,"ion-item")(2,"ion-select",21),u(3,tt,2,2,"ion-select-option",22),a()(),u(4,it,3,0,"ion-text",9),a()),n&2){let s=p();l(3),m("ngForOf",s.categories),l(),m("ngIf",!s.form.get("category_id").valid&&s.form.get("category_id").touched)}}function ot(n,o){n&1&&(r(0,"ion-text",24)(1,"p",25),g(2,"* Please enter item name"),a()())}function at(n,o){n&1&&(r(0,"ion-text",24)(1,"p",25),g(2,"* Please enter the price"),a()())}function rt(n,o){if(n&1){let s=w();r(0,"div",26),v("click",function(){I(s);let i=p();return C(i.changeImage())}),d(1,"ion-icon",27),r(2,"p"),g(3,"Upload Item Image here"),a()()}}function st(n,o){if(n&1){let s=w();r(0,"div",28),v("click",function(){I(s);let i=p();return C(i.changeImage())}),d(1,"ion-img",29),a()}if(n&2){let s=p();l(),m("src",s.image)}}function lt(n,o){if(n&1){let s=w();r(0,"ion-button",30),v("click",function(){I(s);let i=p();return C(i.onSubmit())}),g(1," Save "),a()}if(n&2){let s=p();m("disabled",!s.form.valid)}}function ct(n,o){if(n&1&&(r(0,"ion-button",31),d(1,"ion-spinner",32),a()),n&2){let s=p();m("disabled",!s.form.valid)}}var We=(()=>{let o=class o{constructor(e,i,t,c){this.global=e,this.menu=i,this.categoryService=t,this.profileService=c,this.categories=[],this.isLoading=!1,this.veg=!0,this.status=!0}ngOnInit(){console.log(this.item),this.getCategories(),this.initForm()}initForm(){var e,i,t,c,f,h,M;this.form=new ve({name:new S((e=this.item)!=null&&e.name?this.item.name:"",{validators:[T.required]}),desc:new S((i=this.item)!=null&&i.desc?this.item.desc:"",{validators:[]}),price:new S((t=this.item)!=null&&t.price?this.item.price:"",{validators:[T.required]}),category_id:new S((c=this.item)!=null&&c.category_id?(f=this.item)==null?void 0:f.category_id:"",{validators:[T.required]}),veg:new S(((h=this.item)==null?void 0:h.veg)!=null?this.item.veg:!0,{validators:[T.required]}),status:new S(((M=this.item)==null?void 0:M.status)!=null?this.item.status:!0,{validators:[T.required]})}),this.isLoading=!1}getCategories(){return _(this,null,function*(){try{this.global.showLoader();let e=yield this.profileService.getProfile();this.categories=yield this.categoryService.getRestaurantCategories(e==null?void 0:e.id),this.global.hideLoader()}catch(e){console.log(e),this.global.hideLoader(),this.global.errorToast()}})}onSubmit(){var e;(e=this.item)!=null&&e.name?this.updateItem():this.addItem()}addItem(){return _(this,null,function*(){if(console.log("form value: ",this.form.value),!(!this.form.valid||!this.image))try{this.isLoading=!0;let e=E({},this.form.value);console.log("data: ",e),yield this.menu.addMenuItem(e,this.image,this.imageFile),this.isLoading=!1,this.global.successToast("Menu Item Added Successfully"),this.form.reset(),this.image=null}catch(e){console.log(e),this.isLoading=!1,this.global.errorToast()}})}updateItem(){return _(this,null,function*(){if(console.log("form value: ",this.form.value),!!this.form.valid)try{this.isLoading=!0;let e=E({},this.form.value);console.log("data: ",e),yield this.menu.updateMenuItem(e,this.item,this.image,this.imageFile),this.isLoading=!1,this.global.successToast("Menu Item Updated Successfully"),this.global.modalDismiss()}catch(e){console.log(e),this.isLoading=!1,this.global.errorToast()}})}changeImage(){this.filePickerRef.nativeElement.click()}onFileChosen(e){let i=e.target.files[0];if(!i)return;console.log("file: ",i),this.imageFile=i;let t=new FileReader;console.log(t),t.onload=()=>{let c=t.result.toString();this.image=c,console.log("image: ",this.image)},t.readAsDataURL(i)}};o.\u0275fac=function(i){return new(i||o)(y(W),y(X),y(Y),y(D))},o.\u0275cmp=b({type:o,selectors:[["app-edit-menu-item"]],viewQuery:function(i,t){if(i&1&&le(et,5),i&2){let c;ce(c=me())&&(t.filePickerRef=c.first)}},inputs:{item:"item"},decls:35,vars:9,consts:[["filePicker",""],["slot","start"],["fill","clear","color","dark",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"ion-padding"],[3,"formGroup"],["lines","none"],[4,"ngIf"],["type","text","formControlName","name","placeholder","Name"],["color","danger",4,"ngIf"],["type","text","formControlName","desc","placeholder","Description"],["name","cash-outline","slot","start","color","medium"],["type","number","formControlName","price","placeholder","Price","required",""],["aria-label","Veg","slot","end","formControlName","veg"],["aria-label","Status","slot","end","formControlName","status"],["class","itemImage",3,"click",4,"ngIf"],["type","file","accept","image/jpeg",3,"change"],["class","itemImage imageDiv",3,"click",4,"ngIf"],[1,"ion-margin-top"],["expand","block","shape","round","type","submit","color","primary",3,"disabled","click",4,"ngIf"],["expand","block","shape","round","color","primary",3,"disabled",4,"ngIf"],["label","Select Category","interface","popover","formControlName","category_id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","danger"],[1,"errorMsg"],[1,"itemImage",3,"click"],["name","cloud-upload-outline","color","primary"],[1,"itemImage","imageDiv",3,"click"],[3,"src"],["expand","block","shape","round","type","submit","color","primary",3,"click","disabled"],["expand","block","shape","round","color","primary",3,"disabled"],["name","circles"]],template:function(i,t){if(i&1){let c=w();r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),v("click",function(){return I(c),C(t.global.modalDismiss())}),d(4,"ion-icon",3),a()(),r(5,"ion-title"),g(6),a()()(),r(7,"ion-content",4)(8,"form",5)(9,"ion-list",6),u(10,nt,5,2,"div",7),r(11,"ion-item"),d(12,"ion-input",8),a(),u(13,ot,3,0,"ion-text",9),r(14,"ion-item"),d(15,"ion-textarea",10),a(),r(16,"ion-item"),d(17,"ion-icon",11)(18,"ion-input",12),a(),u(19,at,3,0,"ion-text",9),r(20,"ion-item")(21,"ion-label"),g(22,"VEG"),a(),d(23,"ion-toggle",13),a(),r(24,"ion-item")(25,"ion-label"),g(26,"STATUS"),a(),d(27,"ion-toggle",14),a(),u(28,rt,4,0,"div",15),r(29,"input",16,0),v("change",function(h){return I(c),C(t.onFileChosen(h))}),a(),u(31,st,2,1,"div",17),a(),r(32,"div",18),u(33,lt,2,1,"ion-button",19)(34,ct,2,1,"ion-button",20),a()()()}i&2&&(l(6),L("",t.item!=null&&t.item.name?"Edit ":"Add "," Menu Item"),l(2),m("formGroup",t.form),l(2),m("ngIf",(t.categories==null?null:t.categories.length)>0),l(3),m("ngIf",!t.form.get("name").valid&&t.form.get("name").touched),l(6),m("ngIf",!t.form.get("price").valid&&t.form.get("price").touched),l(9),m("ngIf",!t.image||t.image==""),l(3),m("ngIf",t.image&&t.image!=""),l(2),m("ngIf",!t.isLoading),l(),m("ngIf",t.isLoading))},dependencies:[De,Fe,U,$,q,R,F,Q,A,j,O,G,Oe,je,ke,z,we,ze,N,k,xe,ye,fe,_e,be,Ie,Ce],styles:["ion-item[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:5px;margin-top:1vh}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem}.itemImage[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:5px;text-align:center;margin-top:1vh;padding:5vh}.imageDiv[_ngcontent-%COMP%]{height:200px}ion-img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover}input[type=file][_ngcontent-%COMP%]{display:none}"]});let n=o;return n})();function mt(n,o){n&1&&(r(0,"ion-item",1)(1,"ion-thumbnail",2),d(2,"ion-skeleton-text",3),a(),r(3,"ion-label")(4,"h4"),d(5,"ion-skeleton-text",4),a(),r(6,"p"),d(7,"ion-skeleton-text",5),a(),r(8,"p"),d(9,"ion-skeleton-text",6),a()()())}var Ye=(()=>{let o=class o{constructor(){this.dummy=Array(10)}ngOnInit(){}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=b({type:o,selectors:[["app-loading-item"]],decls:2,vars:1,consts:[["lines","none","class","dashedBorderBottom",4,"ngFor","ngForOf"],["lines","none",1,"dashedBorderBottom"],["slot","start"],["animated",""],[2,"width","50%"],[2,"width","80%"],[2,"width","60%"]],template:function(i,t){i&1&&(r(0,"ion-list"),u(1,mt,10,0,"ion-item",0),a()),i&2&&(l(),m("ngForOf",t.dummy))},dependencies:[j,O,H,Te,z,k],styles:["ion-thumbnail[_ngcontent-%COMP%]{width:25vw;height:16vh}ion-thumbnail[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{border-radius:5px}"]});let n=o;return n})();var Je=(()=>{let o=class o{constructor(){this.fallbackImage="assets/imgs/1.jpg",this.index=0,this.currency=Ve.CURRENCY,this.delete=new ee,this.edit=new ee}ngOnInit(){}onImgError(e){e.target.src=this.fallbackImage}deleteItem(){this.delete.emit(this.item)}editItem(){this.edit.emit(this.item)}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=b({type:o,selectors:[["app-item"]],inputs:{item:"item",index:"index"},outputs:{delete:"delete",edit:"edit"},decls:22,vars:12,consts:[["slot","start"],[3,"error","src"],[1,"ion-text-wrap"],[3,"color"],["slot","end","color","dark"],["side","end"],["color","light",3,"click"],["slot","icon-only","name","create","color","secondary"],["slot","icon-only","name","trash","color","danger"]],template:function(i,t){i&1&&(r(0,"ion-item-sliding")(1,"ion-item")(2,"ion-thumbnail",0)(3,"img",1),v("error",function(f){return t.onImgError(f)}),a()(),r(4,"ion-label",2)(5,"div"),d(6,"div"),a(),r(7,"ion-text"),g(8),a(),r(9,"p"),g(10),a(),r(11,"ion-text",3)(12,"p"),g(13),a()()(),r(14,"ion-text",4),g(15),B(16,"number"),a()(),r(17,"ion-item-options",5)(18,"ion-item-option",6),v("click",function(){return t.editItem()}),d(19,"ion-icon",7),a(),r(20,"ion-item-option",6),v("click",function(){return t.deleteItem()}),d(21,"ion-icon",8),a()()()),i&2&&(l(3),m("src",t.item!=null&&t.item.cover?t.item==null?null:t.item.cover:t.fallbackImage,re),l(2),se(t.item!=null&&t.item.veg?"dotCircle dotVeg":"dotCircle dotNonVeg"),l(3),P(t.item==null?null:t.item.name),l(2),P(t.item==null?null:t.item.desc),l(),m("color",t.item!=null&&t.item.status?"secondary":"danger"),l(2),P(t.item!=null&&t.item.status?"Active":"Inactive"),l(2),de("",t.currency,"",pe(16,9,t.item==null?null:t.item.price,"0.2-2"),""))},dependencies:[Ee,O,H,z,G,F,Me,Se,he],styles:["ion-thumbnail[_ngcontent-%COMP%]{height:10vh;width:20vw}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px;height:100%;width:100%}ion-row[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:2px;padding:.3rem}.quantity[_ngcontent-%COMP%]{width:2rem}ion-text[_ngcontent-%COMP%]{font-size:.8rem}.add[_ngcontent-%COMP%]{padding:0 1.3rem}ion-label[_ngcontent-%COMP%]   div.dotCircle[_ngcontent-%COMP%]{width:14px}ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:.9rem!important;font-weight:700}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:3px;font-size:.75rem!important}ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:13rem!important}"]});let n=o;return n})();function dt(n,o){n&1&&d(0,"app-loading-item")}function gt(n,o){if(n&1&&d(0,"app-empty-screen",6),n&2){let s=p();m("model",s.model)}}function pt(n,o){if(n&1){let s=w();r(0,"app-item",10),v("delete",function(i){I(s);let t=p(4);return C(t.deleteItem(i))})("edit",function(i){I(s);let t=p(4);return C(t.editItem(i))}),a()}if(n&2){let s=p(),e=s.$implicit,i=s.index;m("item",e)("index",i)}}function ut(n,o){if(n&1&&(te(0),u(1,pt,1,2,"app-item",9),ie()),n&2){let s=o.$implicit,e=p(2).$implicit;l(),m("ngIf",e.id==s.category_id)}}function ht(n,o){if(n&1&&(r(0,"ion-list",8)(1,"ion-list-header"),g(2),B(3,"uppercase"),a(),u(4,ut,2,1,"ng-container",5),a()),n&2){let s=p().$implicit,e=p();l(2),L(" ",ge(3,2,s==null?null:s.name)," "),l(2),m("ngForOf",e.items)}}function ft(n,o){if(n&1&&(te(0),u(1,ht,5,4,"ion-list",7),ie()),n&2){let s=o.$implicit,e=p();l(),m("ngIf",e.checkItemCategory(s.id))}}var Wt=(()=>{let o=class o{constructor(e,i,t,c){this.menu=e,this.categoryService=i,this.global=t,this.profileService=c,this.items=[],this.isLoading=!1,this.model={icon:"fast-food-outline",title:"No Menu Available"},this.categories=[],this.allItems=[],Le({create:Ae,trash:Ue,add:Be,arrowBackOutline:Ne,cashOutline:Re,cloudUploadOutline:qe})}ngOnInit(){this.menuSub=this.menu.items.subscribe(e=>{console.log("menu: ",e),this.allItems=e,this.items=[...this.allItems]}),this.getItems()}getItems(){return _(this,null,function*(){try{this.isLoading=!0;let e=yield this.profileService.getProfile();this.categories=yield this.categoryService.getRestaurantCategories(e==null?void 0:e.id),yield this.menu.getRestaurantMenu(),this.isLoading=!1}catch(e){console.log(e),this.isLoading=!1,this.global.errorToast()}})}checkItemCategory(e){return!!this.items.find(t=>t.category_id==e)}editItem(e){return _(this,null,function*(){try{let i={component:We,componentProps:e?{item:e}:{},swipeToClose:!0},t=yield this.global.createModal(i)}catch(i){console.log(i)}})}deleteItem(e){this.global.showAlert("Are you sure you want to remove "+(e==null?void 0:e.name)+" from your Menu ?","Confirm",[{text:"No",role:"cancel"},{text:"Yes",handler:()=>{this.removeItem(e)}}])}removeItem(e){return _(this,null,function*(){try{this.global.showLoader(),yield this.menu.removeMenuItem(e),this.global.hideLoader()}catch(i){console.log(i),this.global.hideLoader(),this.global.errorToast("Operation Failed! Check your internet connection")}})}ngOnDestroy(){this.menuSub&&this.menuSub.unsubscribe(),this.menu.reset()}};o.\u0275fac=function(i){return new(i||o)(y(X),y(Y),y(W),y(D))},o.\u0275cmp=b({type:o,selectors:[["app-menu"]],decls:11,vars:3,consts:[["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","add"],[4,"ngIf"],[3,"model",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"model"],["lines","none","class","dashedBorderBottom",4,"ngIf"],["lines","none",1,"dashedBorderBottom"],[3,"item","index","delete","edit",4,"ngIf"],[3,"delete","edit","item","index"]],template:function(i,t){i&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),v("click",function(){return t.editItem()}),d(4,"ion-icon",2),a()(),r(5,"ion-title"),g(6,"Menu"),a()()(),r(7,"ion-content"),u(8,dt,1,0,"app-loading-item",3)(9,gt,1,1,"app-empty-screen",4)(10,ft,2,1,"ng-container",5),a()),i&2&&(l(8),m("ngIf",t.isLoading),l(),m("ngIf",!t.isLoading&&(t.categories==null?null:t.categories.length)==0),l(),m("ngForOf",t.categories))},dependencies:[U,$,q,R,F,Q,A,j,Pe,N,k,ue,Ye,Je,Ge],styles:["ion-list[_ngcontent-%COMP%]{padding-bottom:2vh}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;letter-spacing:.5px;margin-bottom:5px}"]});let n=o;return n})();export{Wt as MenuPage};
